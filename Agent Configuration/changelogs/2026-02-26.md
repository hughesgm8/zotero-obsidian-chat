# Changelog — 2026-02-26

## [12:30] Fix follow-up questions losing paper context
- **File Modified**: `src/orchestrator.ts`
- **Change**: Follow-up questions like "tell me more about that paper" now carry forward sources from the last assistant message, so the LLM retains context about previously discussed papers.
- **Logic Update**:
  ```
  # In query():
  # 1. After extractItemKeys, walk conversationHistory backwards to find
  #    last assistant message with sources → collect keys into carryForwardKeys
  # 2. After fetching metadata for new search results, fetch metadata for
  #    any carryForwardKeys not already in results → append to sources
  # 3. When selecting top N papers for full text, prioritize carry-forward
  #    papers (user is likely asking about them) over new search results
  ```
- **Reason**: Every message triggered a fresh semantic search using the raw follow-up text as the query. Vague follow-ups like "tell me more" make terrible search queries, so zotero-mcp returned completely different papers. Now the previous turn's sources are carried forward and prioritized for full text, so the LLM can answer follow-up questions correctly.
